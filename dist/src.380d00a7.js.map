{"version":3,"sources":["../node_modules/atat/lib/types.js","../node_modules/atat/lib/contants.js","../node_modules/atat/lib/utils.js","../node_modules/atat/lib/compiler.js","../node_modules/atat/lib/loaders/default.js","../node_modules/atat/lib/loaders/fetch.js","../node_modules/atat/lib/loaders/index.js","../node_modules/atat/lib/options.js","../node_modules/atat/lib/context.js","../node_modules/atat/lib/atat.js","../node_modules/atat/lib/express.js","../node_modules/atat/lib/index.js","index.ts"],"names":["MuchResultTypes","Object","defineProperty","exports","value","HTML_RULES","CLEAR_TAGS","MATCH_HTML","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","adopt","done","then","apply","__generator","body","_","f","y","t","g","label","sent","trys","ops","verb","Symbol","iterator","n","v","op","TypeError","call","pop","length","push","contants_1","require","types_1","merge","src","dest","x","hasOwnProperty","loopByObject","array","fn","loopAsync","promises","i","l","_a","all","encodeHtml","code","toString","replace","m","escapeQuotes","str","trim","jsonStringify","obj","JSON","stringify","joinHelper","separator","Array","prototype","join","uppercaseHelper","toUpperCase","lowercaseHelper","toLowerCase","matchRecursive","left","right","global","leftMatch","rightMatch","sticky","output","openTokens","delimStart","delimEnd","lastOuterEnd","outerStart","innerStart","regexpExec","index","SyntaxError","repeat","name","OUTSIDE","slice","start","end","INSIDE","regexpTest","regexp","pos","lastIndex","test","match","exec","cleanArray","splice","matchInline","innerEnd","lastEnd","leftStart","atat_1","utils_1","compile","input","ctx","blocks","_this","tags","open","close","block","compileInline","getCompiler","compiler","inline","parts","compileCode","inside","compileFor","value1","value2","out","_b","_c","compileFunction","substring","compileIf","compileSection","regName","template","Error","parse","options","sections","context","parent","compileWhile","outputAsText","outputAsHtml","compileLayout","loadAndParse","layout","compilePartial","args","uri","split","shift","partials","outputSection","arguments","outputCallHelper","helpers","encode","json","lower","upper","compilers","DEFAULT_LOADER","path","readFile","err","data","FETCH_LOADER","fetch","text","default_1","fetch_1","loaders_1","DEFAULT_OPTIONS","it","$","loader","compiler_1","options_1","AtatContext","opts","model","getSection","item","context_1","config","assign","Function","render","loadAndRender","__express","callback","err_1","express_1","default"],"mappings":"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","file":"src.380d00a7.js","sourceRoot":"..\\src","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar MuchResultTypes;\r\n(function (MuchResultTypes) {\r\n    MuchResultTypes[\"OUTSIDE\"] = \"outside\";\r\n    MuchResultTypes[\"INSIDE\"] = \"inside\";\r\n})(MuchResultTypes = exports.MuchResultTypes || (exports.MuchResultTypes = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HTML_RULES = {\r\n    '\"': '&#34;',\r\n    '&': '&#38;',\r\n    \"'\": '&#39;',\r\n    '/': '&#47;',\r\n    '<': '&#60;',\r\n    '>': '&#62;',\r\n};\r\nexports.CLEAR_TAGS = /[-[\\](){}*+?.,\\\\^$|#\\s]/g;\r\nexports.MATCH_HTML = /&(?!#?\\w+;)|<|>|\"|'|\\//g;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar contants_1 = require(\"./contants\");\r\nvar types_1 = require(\"./types\");\r\nfunction merge(src, dest) {\r\n    if (dest === void 0) { dest = {}; }\r\n    for (var x in src) {\r\n        if (!dest.hasOwnProperty(x) && src.hasOwnProperty(x)) {\r\n            if (typeof src[x] === 'object') {\r\n                dest[x] = merge(src[x]);\r\n            }\r\n            else {\r\n                dest[x] = src[x];\r\n            }\r\n        }\r\n    }\r\n    return dest;\r\n}\r\nexports.merge = merge;\r\nfunction loopByObject(array, fn) {\r\n    for (var x in array) {\r\n        if (array.hasOwnProperty(x)) {\r\n            fn(array[x], x, array);\r\n        }\r\n    }\r\n}\r\nexports.loopByObject = loopByObject;\r\nfunction loopAsync(array, fn) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var promises, i, l, results;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    promises = [];\r\n                    for (i = 0, l = array.length; i < l; i += 1) {\r\n                        promises.push(fn(array[i], i, array));\r\n                    }\r\n                    return [4 /*yield*/, Promise.all(promises)];\r\n                case 1:\r\n                    results = _a.sent();\r\n                    return [2 /*return*/, results];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.loopAsync = loopAsync;\r\nfunction encodeHtml(code) {\r\n    return code.toString().replace(contants_1.MATCH_HTML, function (m) {\r\n        return contants_1.HTML_RULES[m] || m;\r\n    });\r\n}\r\nexports.encodeHtml = encodeHtml;\r\nfunction escapeQuotes(str) {\r\n    return str\r\n        .trim()\r\n        .replace(/^\"(.*)\"$/g, '$1')\r\n        .replace(/^'(.*)'$/g, '$1');\r\n}\r\nexports.escapeQuotes = escapeQuotes;\r\nfunction jsonStringify(obj) {\r\n    return JSON.stringify(obj);\r\n}\r\nexports.jsonStringify = jsonStringify;\r\nfunction joinHelper(array, separator) {\r\n    if (separator === void 0) { separator = ''; }\r\n    return Array.prototype.join.call(array, separator);\r\n}\r\nexports.joinHelper = joinHelper;\r\nfunction uppercaseHelper(str) {\r\n    return str.toString().toUpperCase();\r\n}\r\nexports.uppercaseHelper = uppercaseHelper;\r\nfunction lowercaseHelper(str) {\r\n    return str.toString().toLowerCase();\r\n}\r\nexports.lowercaseHelper = lowercaseHelper;\r\nfunction matchRecursive(str, left, right) {\r\n    var global = left.global;\r\n    var sticky = left.sticky;\r\n    var output = [];\r\n    var openTokens = 0;\r\n    var delimStart = 0;\r\n    var delimEnd = 0;\r\n    var lastOuterEnd = 0;\r\n    var outerStart = 0;\r\n    var innerStart = 0;\r\n    var leftMatch;\r\n    var rightMatch;\r\n    /* eslint-disable-next-line */\r\n    while (true) {\r\n        leftMatch = regexpExec(str, left, delimEnd);\r\n        rightMatch = regexpExec(str, right, delimEnd);\r\n        // Keep the leftmost match only\r\n        if (leftMatch && rightMatch) {\r\n            if (leftMatch.index <= rightMatch.index) {\r\n                rightMatch = null;\r\n            }\r\n            else {\r\n                leftMatch = null;\r\n            }\r\n        }\r\n        // Paths (LM: leftMatch, RM: rightMatch, OT: openTokens):\r\n        // LM | RM | OT | Result\r\n        // 1  | 0  | 1  | loop\r\n        // 1  | 0  | 0  | loop\r\n        // 0  | 1  | 1  | loop\r\n        // 0  | 1  | 0  | throw\r\n        // 0  | 0  | 1  | throw\r\n        // 0  | 0  | 0  | break\r\n        // The paths above don't include the sticky mode special case. The loop ends after the\r\n        // first completed match if not `global`.\r\n        if (leftMatch || rightMatch) {\r\n            delimStart = (leftMatch || rightMatch).index;\r\n            delimEnd =\r\n                delimStart +\r\n                    (leftMatch || rightMatch)[0]\r\n                        .length;\r\n        }\r\n        else if (!openTokens) {\r\n            break;\r\n        }\r\n        if (sticky && !openTokens && delimStart > lastOuterEnd) {\r\n            break;\r\n        }\r\n        if (leftMatch) {\r\n            if (!openTokens) {\r\n                outerStart = delimStart;\r\n                innerStart = delimEnd;\r\n            }\r\n            openTokens += 1;\r\n        }\r\n        else if (rightMatch && openTokens) {\r\n            openTokens -= 1;\r\n            if (!openTokens) {\r\n                if (outerStart > lastOuterEnd) {\r\n                    output.push({\r\n                        name: types_1.MuchResultTypes.OUTSIDE,\r\n                        value: str.slice(lastOuterEnd, outerStart),\r\n                        start: lastOuterEnd,\r\n                        end: outerStart,\r\n                    });\r\n                }\r\n                output.push({\r\n                    name: types_1.MuchResultTypes.INSIDE,\r\n                    value: str.slice(innerStart, delimStart),\r\n                    start: innerStart,\r\n                    end: delimStart,\r\n                    left: {\r\n                        value: str.slice(outerStart, innerStart),\r\n                        start: outerStart,\r\n                        end: innerStart,\r\n                    },\r\n                    right: {\r\n                        value: str.slice(delimStart, delimEnd),\r\n                        start: delimStart,\r\n                        end: delimEnd,\r\n                    },\r\n                });\r\n                lastOuterEnd = delimEnd;\r\n                if (!global) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (rightMatch !== null) {\r\n                throw new SyntaxError(\"Unbalanced delimiter \\\"\" + rightMatch + \"\\\" was found in the template\\n\" + str + \"\\n\" + ' '.repeat(rightMatch.index) + '^'.repeat(rightMatch.toString().length));\r\n            }\r\n            else {\r\n                throw new SyntaxError(\"Unbalanced delimiter found in the template\\n\" + str);\r\n            }\r\n        }\r\n        // If the delimiter matched an empty string, avoid an infinite loop\r\n        if (delimStart === delimEnd) {\r\n            delimEnd += 1;\r\n        }\r\n    }\r\n    if (global && str.length > lastOuterEnd) {\r\n        output.push({\r\n            name: types_1.MuchResultTypes.OUTSIDE,\r\n            value: str.slice(lastOuterEnd),\r\n            start: lastOuterEnd,\r\n            end: str.length,\r\n        });\r\n    }\r\n    return output;\r\n}\r\nexports.matchRecursive = matchRecursive;\r\nfunction regexpTest(str, regexp, pos) {\r\n    if (pos === void 0) { pos = 0; }\r\n    regexp.lastIndex = pos;\r\n    var test = regexp.test(str);\r\n    if (regexp.global) {\r\n        regexp.lastIndex = test ? regexp.lastIndex : 0;\r\n    }\r\n    return test;\r\n}\r\nexports.regexpTest = regexpTest;\r\nfunction regexpExec(str, regexp, pos) {\r\n    if (pos === void 0) { pos = 0; }\r\n    regexp.lastIndex = pos;\r\n    var match = regexp.exec(str);\r\n    if (regexp.global) {\r\n        regexp.lastIndex = match ? regexp.lastIndex : 0;\r\n    }\r\n    return match;\r\n}\r\nexports.regexpExec = regexpExec;\r\nfunction cleanArray(array) {\r\n    for (var i = 0; i < array.length; i += 1) {\r\n        if (typeof array[i] === 'undefined') {\r\n            array.splice(i, 1);\r\n            i -= 1;\r\n        }\r\n    }\r\n}\r\nexports.cleanArray = cleanArray;\r\nfunction matchInline(str, regexp) {\r\n    var global = regexp.global;\r\n    var sticky = regexp.sticky;\r\n    var output = [];\r\n    var lastEnd = 0;\r\n    var leftStart = 0;\r\n    var innerStart;\r\n    var innerEnd;\r\n    /* eslint-disable-next-line */\r\n    while (true) {\r\n        var match = regexpExec(str, regexp, lastEnd);\r\n        if (match === null) {\r\n            break;\r\n        }\r\n        leftStart = match.index;\r\n        if (sticky && leftStart > lastEnd) {\r\n            break;\r\n        }\r\n        cleanArray(match);\r\n        innerStart = leftStart + match[1].length;\r\n        innerEnd = lastEnd + innerStart + match[2].length;\r\n        if (leftStart > lastEnd) {\r\n            output.push({\r\n                name: types_1.MuchResultTypes.OUTSIDE,\r\n                value: str.slice(lastEnd, leftStart),\r\n                start: lastEnd,\r\n                end: leftStart,\r\n            });\r\n        }\r\n        output.push({\r\n            name: types_1.MuchResultTypes.INSIDE,\r\n            value: match[2],\r\n            start: innerStart,\r\n            end: innerEnd,\r\n            left: {\r\n                value: match[1],\r\n                start: leftStart,\r\n                end: innerStart,\r\n            },\r\n            right: {\r\n                value: match[3],\r\n                start: innerEnd,\r\n                end: innerEnd + match[3].length,\r\n            },\r\n        });\r\n        lastEnd = leftStart + match[0].length;\r\n        if (!global) {\r\n            break;\r\n        }\r\n    }\r\n    if (global && str.length > lastEnd) {\r\n        output.push({\r\n            name: types_1.MuchResultTypes.OUTSIDE,\r\n            value: str.slice(lastEnd),\r\n            start: lastEnd,\r\n            end: str.length,\r\n        });\r\n    }\r\n    return output;\r\n}\r\nexports.matchInline = matchInline;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar atat_1 = require(\"./atat\");\r\nvar types_1 = require(\"./types\");\r\nvar utils_1 = require(\"./utils\");\r\nexports.helpers = {\r\n    encode: utils_1.encodeHtml,\r\n    join: utils_1.joinHelper,\r\n    json: utils_1.jsonStringify,\r\n    lower: utils_1.lowercaseHelper,\r\n    upper: utils_1.uppercaseHelper,\r\n};\r\nexports.tags = {\r\n    open: /@\\{|@for\\s*\\(|@function\\s+([a-zA-Z_$]{1}[a-zA-Z_$0-9]*)*\\s*\\(|@if\\s*\\(|@section\\s+([a-zA-Z_$]{1}[a-zA-Z_$0-9]*)*\\s*\\{|@while\\s*\\(/g,\r\n    close: /}@/g,\r\n    inline: /(@\\()([^]*?)(\\)@)|(@!\\()([^]*?)(\\)@)|(@[a-zA-Z_$]{1}[a-zA-Z_$0-9]*\\()([^]*?)(\\)@)/g,\r\n    compilers: [\r\n        { regexp: /@\\{/g, compiler: compileCode },\r\n        { regexp: /@for\\s*\\(/g, compiler: compileFor },\r\n        {\r\n            regexp: /@function\\s+([a-zA-Z_$]{1}[a-zA-Z_$0-9]*)*\\s*\\(/g,\r\n            compiler: compileFunction,\r\n        },\r\n        { regexp: /@if\\s*\\(/g, compiler: compileIf },\r\n        {\r\n            regexp: /@section\\s+([a-zA-Z_$]{1}[a-zA-Z_$0-9]*)*\\s*\\{/g,\r\n            compiler: compileSection,\r\n        },\r\n        { regexp: /@while\\s*\\(/g, compiler: compileWhile },\r\n        { regexp: /(@\\()([^]*?)(\\)@)/g, compiler: outputAsText },\r\n        { regexp: /(@!\\()([^]*?)(\\)@)/g, compiler: outputAsHtml },\r\n        { regexp: /(@layout\\()([^]*?)(\\)@)/g, compiler: compileLayout },\r\n        { regexp: /(@partial\\()([^]*?)(\\)@)/g, compiler: compilePartial },\r\n        { regexp: /(@section\\()([^]*?)(\\)@)/g, compiler: outputSection },\r\n        {\r\n            regexp: /(@[a-zA-Z_$]{1}[a-zA-Z_$0-9]*\\()([^]*?)(\\)@)/g,\r\n            compiler: outputCallHelper,\r\n        },\r\n    ],\r\n};\r\nfunction compile(input, ctx) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var blocks, results;\r\n        var _this = this;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    if (input.length === 0) {\r\n                        return [2 /*return*/, ''];\r\n                    }\r\n                    blocks = utils_1.matchRecursive(input, ctx.tags.open, ctx.tags.close);\r\n                    return [4 /*yield*/, utils_1.loopAsync(blocks, function (block) { return __awaiter(_this, void 0, void 0, function () {\r\n                            var left, compiler, result;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0:\r\n                                        if (!(block.name === types_1.MuchResultTypes.OUTSIDE)) return [3 /*break*/, 2];\r\n                                        if (block.value.trim() === '') {\r\n                                            return [2 /*return*/, ''];\r\n                                        }\r\n                                        return [4 /*yield*/, compileInline(block.value, ctx)];\r\n                                    case 1: return [2 /*return*/, _a.sent()];\r\n                                    case 2:\r\n                                        left = block.left;\r\n                                        compiler = ctx.getCompiler(left.value);\r\n                                        return [4 /*yield*/, compiler(block, ctx)];\r\n                                    case 3:\r\n                                        result = _a.sent();\r\n                                        return [2 /*return*/, result || ''];\r\n                                }\r\n                            });\r\n                        }); })];\r\n                case 1:\r\n                    results = _a.sent();\r\n                    return [2 /*return*/, results.join('')];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.compile = compile;\r\nfunction compileInline(input, ctx) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var blocks, results;\r\n        var _this = this;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    blocks = utils_1.matchInline(input, ctx.tags.inline);\r\n                    return [4 /*yield*/, utils_1.loopAsync(blocks, function (block) { return __awaiter(_this, void 0, void 0, function () {\r\n                            var left, value, right, compiler, result;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0:\r\n                                        if (block.name === types_1.MuchResultTypes.OUTSIDE) {\r\n                                            ctx.parts.push(block.value);\r\n                                            return [2 /*return*/, \"this.output += this.parts[\" + (ctx.parts.length - 1) + \"];\"];\r\n                                        }\r\n                                        left = block.left, value = block.value, right = block.right;\r\n                                        if (value.trim() === '') {\r\n                                            return [2 /*return*/, ''];\r\n                                        }\r\n                                        compiler = ctx.getCompiler(left.value + value + right.value);\r\n                                        return [4 /*yield*/, compiler(block, ctx)];\r\n                                    case 1:\r\n                                        result = _a.sent();\r\n                                        return [2 /*return*/, result || ''];\r\n                                }\r\n                            });\r\n                        }); })];\r\n                case 1:\r\n                    results = _a.sent();\r\n                    return [2 /*return*/, results.join('')];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.compileInline = compileInline;\r\n// compilers\r\nfunction compileCode(inside) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            return [2 /*return*/, inside.value.trim()];\r\n        });\r\n    });\r\n}\r\nexports.compileCode = compileCode;\r\nfunction compileFor(inside, ctx) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var code, _a, value1, value2, out, _b;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    code = \"for(\" + inside.value + \"}\";\r\n                    _a = utils_1.matchRecursive(code, /\\{/g, /\\}/g), value1 = _a[0].value, value2 = _a[1].value;\r\n                    out = value1;\r\n                    out += '{';\r\n                    _b = out;\r\n                    return [4 /*yield*/, compile(value2, ctx)];\r\n                case 1:\r\n                    out = _b + _c.sent();\r\n                    out += '}';\r\n                    return [2 /*return*/, out];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.compileFor = compileFor;\r\nfunction compileFunction(inside) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var left;\r\n        return __generator(this, function (_a) {\r\n            left = inside.left.value.trim().substring(1);\r\n            return [2 /*return*/, \"\" + left + inside.value.trim() + \"}\"];\r\n        });\r\n    });\r\n}\r\nexports.compileFunction = compileFunction;\r\nfunction compileIf(inside, ctx) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var code, blocks, results;\r\n        var _this = this;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    code = \"if(\" + inside.value + \"}\";\r\n                    blocks = utils_1.matchRecursive(code, /\\{/g, /\\}/g);\r\n                    return [4 /*yield*/, utils_1.loopAsync(blocks, function (block) { return __awaiter(_this, void 0, void 0, function () {\r\n                            var result;\r\n                            return __generator(this, function (_a) {\r\n                                switch (_a.label) {\r\n                                    case 0:\r\n                                        if (block.name === types_1.MuchResultTypes.OUTSIDE) {\r\n                                            return [2 /*return*/, block.value];\r\n                                        }\r\n                                        return [4 /*yield*/, compile(block.value, ctx)];\r\n                                    case 1:\r\n                                        result = _a.sent();\r\n                                        return [2 /*return*/, result];\r\n                                }\r\n                            });\r\n                        }); })];\r\n                case 1:\r\n                    results = _a.sent();\r\n                    return [2 /*return*/, results.join('')];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.compileIf = compileIf;\r\nfunction compileSection(inside, ctx) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var block, value, regName, match, name, template;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    block = inside.value.trim();\r\n                    value = inside.left.value.trim();\r\n                    regName = /^@section\\s+([a-zA-Z_$]{1}[a-zA-Z_$0-9]*)+\\s*\\{/g;\r\n                    match = utils_1.regexpExec(value, regName);\r\n                    if (!match || match.length > 2) {\r\n                        throw new Error('Section name is not specified');\r\n                    }\r\n                    name = match[1].trim();\r\n                    return [4 /*yield*/, atat_1.parse(block, ctx.options)];\r\n                case 1:\r\n                    template = _a.sent();\r\n                    if (ctx.sections[name]) {\r\n                        throw new Error(\"The section \\\"\" + name + \"\\\" is already specified\");\r\n                    }\r\n                    template.context.parent = ctx;\r\n                    ctx.sections[name] = template;\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.compileSection = compileSection;\r\nfunction compileWhile(inside, ctx) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var code, _a, value1, value2, out, _b;\r\n        return __generator(this, function (_c) {\r\n            switch (_c.label) {\r\n                case 0:\r\n                    code = \"while(\" + inside.value + \"}\";\r\n                    _a = utils_1.matchRecursive(code, /\\{/g, /\\}/g), value1 = _a[0].value, value2 = _a[1].value;\r\n                    out = value1;\r\n                    out += '{';\r\n                    _b = out;\r\n                    return [4 /*yield*/, compile(value2, ctx)];\r\n                case 1:\r\n                    out = _b + _c.sent();\r\n                    out += '}';\r\n                    return [2 /*return*/, out];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.compileWhile = compileWhile;\r\n// inline\r\nfunction outputAsText(inside) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            return [2 /*return*/, \"this.output += this.helpers.encode(\" + inside.value.trim() + \");\"];\r\n        });\r\n    });\r\n}\r\nexports.outputAsText = outputAsText;\r\nfunction outputAsHtml(inside) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        return __generator(this, function (_a) {\r\n            return [2 /*return*/, \"this.output += (\" + inside.value.trim() + \");\"];\r\n        });\r\n    });\r\n}\r\nexports.outputAsHtml = outputAsHtml;\r\nfunction compileLayout(inside, ctx) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var template;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, atat_1.loadAndParse(utils_1.escapeQuotes(inside.value), ctx.options)];\r\n                case 1:\r\n                    template = _a.sent();\r\n                    if (ctx.layout) {\r\n                        throw new Error('Layout is already specified');\r\n                    }\r\n                    ctx.layout = template;\r\n                    template.context.parent = ctx;\r\n                    return [2 /*return*/];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.compileLayout = compileLayout;\r\nfunction compilePartial(inside, ctx) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var value, args, uri, template, output;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    value = inside.value.trim();\r\n                    args = value.split(/\\s*,\\s*/g);\r\n                    uri = utils_1.escapeQuotes(args.shift() || '');\r\n                    return [4 /*yield*/, atat_1.loadAndParse(uri, ctx.options)];\r\n                case 1:\r\n                    template = _a.sent();\r\n                    ctx.partials.push(template);\r\n                    template.context.parent = ctx;\r\n                    output = \"this.output += this.partials[\" + (ctx.partials.length -\r\n                        1) + \"](\" + args + \");\";\r\n                    return [2 /*return*/, output];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.compilePartial = compilePartial;\r\nfunction outputSection(inside, ctx) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var name, output;\r\n        return __generator(this, function (_a) {\r\n            name = utils_1.escapeQuotes(inside.value);\r\n            output = \"this.output += (function(){var s = this.getSection('\" + name + \"'); \" +\r\n                (\"return s?s(\" + ctx.arguments + \"):\\\"\\\";}).call(this);\");\r\n            return [2 /*return*/, output];\r\n        });\r\n    });\r\n}\r\nexports.outputSection = outputSection;\r\nfunction outputCallHelper(inside, ctx) {\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var left, value, name;\r\n        return __generator(this, function (_a) {\r\n            left = inside.left, value = inside.value;\r\n            name = left.value.substring(1, left.value.length - 1);\r\n            if (typeof ctx.helpers[name] !== 'function') {\r\n                throw new Error(\"Helper \\\"\" + name + \"\\\" is not declarated\");\r\n            }\r\n            return [2 /*return*/, \"this.output += this.helpers['\" + name + \"'](\" + value.trim() + \");\"];\r\n        });\r\n    });\r\n}\r\nexports.outputCallHelper = outputCallHelper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.DEFAULT_LOADER = function (path) {\r\n    return new Promise(function (resolve, reject) {\r\n        var fs = require('fs');\r\n        fs.readFile(path, 'utf-8', function (err, data) {\r\n            return err ? reject(err) : resolve(data);\r\n        });\r\n    });\r\n};\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FETCH_LOADER = function (path) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var res, text;\r\n    return __generator(this, function (_a) {\r\n        switch (_a.label) {\r\n            case 0: return [4 /*yield*/, fetch(path)];\r\n            case 1:\r\n                res = _a.sent();\r\n                return [4 /*yield*/, res.text()];\r\n            case 2:\r\n                text = _a.sent();\r\n                return [2 /*return*/, text];\r\n        }\r\n    });\r\n}); };\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar default_1 = require(\"./default\");\r\nexports.DEFAULT_LOADER = default_1.DEFAULT_LOADER;\r\nvar fetch_1 = require(\"./fetch\");\r\nexports.FETCH_LOADER = fetch_1.FETCH_LOADER;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar loaders_1 = require(\"./loaders\");\r\nexports.DEFAULT_OPTIONS = {\r\n    it: 'it',\r\n    $: '$',\r\n    helpers: {},\r\n    loader: loaders_1.DEFAULT_LOADER,\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar compiler_1 = require(\"./compiler\");\r\nvar options_1 = require(\"./options\");\r\nvar utils_1 = require(\"./utils\");\r\nvar AtatContext = /** @class */ (function () {\r\n    function AtatContext(opts) {\r\n        this.body = null;\r\n        this.template = null;\r\n        this.options = utils_1.merge(options_1.DEFAULT_OPTIONS, opts);\r\n        this.helpers = utils_1.merge(compiler_1.helpers, opts.helpers);\r\n        this.model = null;\r\n        this.output = '';\r\n        this.parts = [];\r\n        this.parent = null;\r\n        this.arguments = [this.options.it, this.options.$, 'body'].join(',');\r\n        this.tags = compiler_1.tags;\r\n        this.layout = null;\r\n        this.partials = [];\r\n        this.sections = {};\r\n    }\r\n    AtatContext.prototype.getSection = function (name) {\r\n        return name\r\n            ? this.sections[name] || (this.parent && this.parent.getSection(name))\r\n            : null;\r\n    };\r\n    AtatContext.prototype.getCompiler = function (str) {\r\n        for (var i = 0, l = this.tags.compilers.length; i < l; i += 1) {\r\n            var item = this.tags.compilers[i];\r\n            if (utils_1.regexpTest(str, item.regexp)) {\r\n                return item.compiler;\r\n            }\r\n        }\r\n        return null;\r\n    };\r\n    return AtatContext;\r\n}());\r\nexports.AtatContext = AtatContext;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar compiler_1 = require(\"./compiler\");\r\nvar context_1 = require(\"./context\");\r\nvar loaders_1 = require(\"./loaders\");\r\nvar options_1 = require(\"./options\");\r\nfunction config(opts) {\r\n    Object.assign(options_1.DEFAULT_OPTIONS, opts);\r\n}\r\nexports.config = config;\r\nfunction parse(input, options) {\r\n    if (options === void 0) { options = {}; }\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var ctx, output, result, template;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    ctx = new context_1.AtatContext(options);\r\n                    return [4 /*yield*/, compiler_1.compile(input, ctx)];\r\n                case 1:\r\n                    output = _a.sent();\r\n                    result = new Function(ctx.arguments, output + \";return this.output;\");\r\n                    template = function (model) {\r\n                        ctx.output = '';\r\n                        ctx.model = model || ctx.model;\r\n                        var body = result.call(ctx, ctx.model, ctx.helpers, ctx.body);\r\n                        if (ctx.layout) {\r\n                            ctx.layout.context.body = body;\r\n                            body = ctx.layout(ctx.model);\r\n                        }\r\n                        return body;\r\n                    };\r\n                    template.context = ctx;\r\n                    ctx.template = template;\r\n                    return [2 /*return*/, ctx.template];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.parse = parse;\r\nfunction loadAndParse(path, options) {\r\n    if (options === void 0) { options = {}; }\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var loader, content, template;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    loader = options.loader || options_1.DEFAULT_OPTIONS.loader;\r\n                    if (!loader) {\r\n                        loader = loaders_1.DEFAULT_LOADER;\r\n                        options.loader = loader;\r\n                    }\r\n                    return [4 /*yield*/, loader(path)];\r\n                case 1:\r\n                    content = _a.sent();\r\n                    return [4 /*yield*/, parse(content, options)];\r\n                case 2:\r\n                    template = _a.sent();\r\n                    return [2 /*return*/, template];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.loadAndParse = loadAndParse;\r\nfunction render(input, model, options) {\r\n    if (model === void 0) { model = {}; }\r\n    if (options === void 0) { options = {}; }\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var template;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, parse(input, options)];\r\n                case 1:\r\n                    template = _a.sent();\r\n                    return [2 /*return*/, template(model)];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.render = render;\r\nfunction loadAndRender(path, model, options) {\r\n    if (options === void 0) { options = {}; }\r\n    return __awaiter(this, void 0, void 0, function () {\r\n        var template;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0: return [4 /*yield*/, loadAndParse(path, options)];\r\n                case 1:\r\n                    template = _a.sent();\r\n                    return [2 /*return*/, template(model)];\r\n            }\r\n        });\r\n    });\r\n}\r\nexports.loadAndRender = loadAndRender;\r\n","\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __generator = (this && this.__generator) || function (thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar atat_1 = require(\"./atat\");\r\nfunction __express(path, model, callback) {\r\n    var _this = this;\r\n    (function () { return __awaiter(_this, void 0, void 0, function () {\r\n        var result, err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    _a.trys.push([0, 2, , 3]);\r\n                    return [4 /*yield*/, atat_1.loadAndRender(path, model)];\r\n                case 1:\r\n                    result = _a.sent();\r\n                    callback(null, result);\r\n                    return [3 /*break*/, 3];\r\n                case 2:\r\n                    err_1 = _a.sent();\r\n                    callback(err_1);\r\n                    return [3 /*break*/, 3];\r\n                case 3: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); })();\r\n}\r\nexports.__express = __express;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar atat_1 = require(\"./atat\");\r\nexports.config = atat_1.config;\r\nexports.loadAndParse = atat_1.loadAndParse;\r\nexports.loadAndRender = atat_1.loadAndRender;\r\nexports.parse = atat_1.parse;\r\nexports.render = atat_1.render;\r\nvar express_1 = require(\"./express\");\r\nexports.__express = express_1.__express;\r\nvar loaders_1 = require(\"./loaders\");\r\nexports.DEFAULT_LOADER = loaders_1.DEFAULT_LOADER;\r\nexports.FETCH_LOADER = loaders_1.FETCH_LOADER;\r\nexports.default = {\r\n    config: atat_1.config,\r\n    loadAndParse: atat_1.loadAndParse,\r\n    loadAndRender: atat_1.loadAndRender,\r\n    parse: atat_1.parse,\r\n    render: atat_1.render,\r\n    FETCH_LOADER: loaders_1.FETCH_LOADER,\r\n    DEFAULT_LOADER: loaders_1.DEFAULT_LOADER,\r\n};\r\n","import { render } from 'atat';\r\n\r\nrender('Hello @(it.world)@!', { world: 'World' }).then(result => {\r\n  console.log(result);\r\n});\r\n"]}